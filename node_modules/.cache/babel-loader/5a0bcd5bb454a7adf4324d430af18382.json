{"ast":null,"code":"import _classCallCheck from \"/Users/danielbrawn/Desktop/FrontProvi/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/Users/danielbrawn/Desktop/FrontProvi/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/Users/danielbrawn/Desktop/FrontProvi/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/Users/danielbrawn/Desktop/FrontProvi/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/Users/danielbrawn/Desktop/FrontProvi/node_modules/@babel/runtime/helpers/esm/inherits\";\nvar _jsxFileName = \"/Users/danielbrawn/Desktop/FrontProvi/src/components/UsuarioList.js\";\nimport React, { Component } from 'react';\nimport Usuario from './Usuario';\nimport axios from 'axios';\nimport { Route, Redirect } from 'react-router-dom';\nimport Masonry from 'react-masonry-component';\nimport decode from 'jwt-decode';\nvar imagesLoadedOptions = {\n  background: '.my-bg-image-el'\n};\n\nvar UsuarioList =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(UsuarioList, _Component);\n\n  function UsuarioList(props) {\n    var _this;\n\n    _classCallCheck(this, UsuarioList);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(UsuarioList).call(this, props));\n    _this.state = {\n      pagina: 0,\n      usuarios: []\n    };\n    return _this;\n  }\n\n  _createClass(UsuarioList, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      var _this2 = this;\n\n      var token = localStorage.getItem('token').substring(1, localStorage.getItem('token').length - 1);\n      var tok = localStorage.getItem('token');\n\n      if (tok) {\n        axios.defaults.headers.common['Authorization'] = 'Bearer ' + token;\n      }\n\n      axios.get('https://regalayapp1.herokuapp.com/usuario').then(function (response) {\n        var state = _this2.state;\n        var usuarios = response.data;\n        state.usuarios = usuarios;\n        state.pagina = 0; // pueden cambiar el tamaño de partion aca\n\n        _this2.setState(state);\n      });\n    }\n  }, {\n    key: \"checkAuth\",\n    value: function checkAuth() {\n      var token = localStorage.getItem('token');\n\n      if (!token) {\n        return false;\n      }\n\n      try {\n        var tok = decode(token);\n\n        if (!tok) {\n          return false;\n        }\n      } catch (e) {\n        return false;\n      }\n\n      return true;\n    }\n  }, {\n    key: \"loginCheck\",\n    value: function loginCheck() {\n      var _this3 = this;\n\n      return React.createElement(Route, {\n        render: function render(props) {\n          return _this3.checkAuth() ? // Falta pasarle los props para que sepa cual usuario es por el id y que nombre tiene\n          _this3.ahoraRenderPag() : React.createElement(Redirect, {\n            to: {\n              pathname: '/login',\n              state: {\n                from: props.location\n              }\n            },\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 62\n            },\n            __self: this\n          });\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 57\n        },\n        __self: this\n      });\n    }\n  }, {\n    key: \"ahoraRenderPag\",\n    value: function ahoraRenderPag() {\n      return React.createElement(Masonry, {\n        imagesLoadedOptions: imagesLoadedOptions,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 75\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"container-fuid d-flex justify-content-center\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 76\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"row\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 77\n        },\n        __self: this\n      }, this.state.usuarios.map(function (usu) {\n        return React.createElement(Usuario, {\n          key: usu.id,\n          data: usu,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 78\n          },\n          __self: this\n        });\n      }))));\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      return React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 88\n        },\n        __self: this\n      }, this.loginCheck());\n    }\n  }]);\n\n  return UsuarioList;\n}(Component);\n\nexport default UsuarioList;","map":{"version":3,"sources":["/Users/danielbrawn/Desktop/FrontProvi/src/components/UsuarioList.js"],"names":["React","Component","Usuario","axios","Route","Redirect","Masonry","decode","imagesLoadedOptions","background","UsuarioList","props","state","pagina","usuarios","token","localStorage","getItem","substring","length","tok","defaults","headers","common","get","then","response","data","setState","e","checkAuth","ahoraRenderPag","pathname","from","location","map","usu","id","loginCheck"],"mappings":"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","sourcesContent":["import React, {Component} from 'react'\r\nimport Usuario  from './Usuario'\r\nimport axios from 'axios'\r\nimport {Route, Redirect} from 'react-router-dom'\r\nimport Masonry from 'react-masonry-component';\r\nimport decode from 'jwt-decode';\r\n\r\nconst imagesLoadedOptions = { background: '.my-bg-image-el' };\r\nclass UsuarioList extends Component{\r\n  constructor(props){\r\n    super(props);\r\n    this.state={\r\n      pagina: 0,\r\n      usuarios:[]\r\n    };\r\n  }\r\n\r\n  componentDidMount() {\r\n      var token = localStorage.getItem('token').substring(1, localStorage.getItem('token').length - 1);\r\n      var tok=localStorage.getItem('token');\r\n      if (tok) {\r\n          axios.defaults.headers.common['Authorization'] =\r\n              'Bearer ' + token;\r\n      }\r\n        axios.get('https://regalayapp1.herokuapp.com/usuario')\r\n            .then((response) => {\r\n                var state = this.state;\r\n                var usuarios = response.data;\r\n                state.usuarios=usuarios;\r\n                state.pagina = 0;\r\n                // pueden cambiar el tamaño de partion aca\r\n                this.setState(state);\r\n            });\r\n    }\r\n\r\n\r\n\r\n    checkAuth(){\r\n        const token = localStorage.getItem('token');\r\n        if(!token){\r\n            return false;\r\n        }\r\n        try{\r\n            const  tok = decode(token);\r\n            if(!tok){\r\n                return false;\r\n            }\r\n        }catch(e){\r\n\r\n            return false;\r\n        }\r\n        return true;\r\n    }\r\n\r\n    loginCheck(){\r\n        return(\r\n            <Route render = {props => (\r\n                this.checkAuth() ? (\r\n                    // Falta pasarle los props para que sepa cual usuario es por el id y que nombre tiene\r\n                    this.ahoraRenderPag()\r\n                ) : (\r\n                    <Redirect to={{\r\n                        pathname: '/login',\r\n                        state: { from: props.location }\r\n                    }} />\r\n                )\r\n            )} />\r\n        );\r\n    }\r\n\r\n\r\n    ahoraRenderPag(){\r\n\r\n        return(\r\n            <Masonry imagesLoadedOptions={imagesLoadedOptions}>\r\n                <div className=\"container-fuid d-flex justify-content-center\">\r\n                    <div className='row'>\r\n                        {this.state.usuarios.map( (usu)=> <Usuario key={usu.id} data={usu}/>)}\r\n                    </div>\r\n                </div>\r\n            </Masonry>\r\n        );\r\n    }\r\n\r\n  render(){\r\n\r\n    return(\r\n        <div>\r\n            {this.loginCheck()}\r\n        </div>\r\n    )\r\n  }\r\n}\r\nexport default UsuarioList;\r\n"]},"metadata":{},"sourceType":"module"}
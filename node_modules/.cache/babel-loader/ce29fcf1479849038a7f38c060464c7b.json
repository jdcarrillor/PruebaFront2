{"ast":null,"code":"import _classCallCheck from \"/Users/danielbrawn/Desktop/FrontProvi/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/Users/danielbrawn/Desktop/FrontProvi/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/Users/danielbrawn/Desktop/FrontProvi/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/Users/danielbrawn/Desktop/FrontProvi/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/Users/danielbrawn/Desktop/FrontProvi/node_modules/@babel/runtime/helpers/esm/inherits\";\nimport _assertThisInitialized from \"/Users/danielbrawn/Desktop/FrontProvi/node_modules/@babel/runtime/helpers/esm/assertThisInitialized\";\nvar _jsxFileName = \"/Users/danielbrawn/Desktop/FrontProvi/src/App.js\";\nimport React, { Component } from 'react';\nimport Vista from './components/Structure.js';\nimport { BrowserRouter } from 'react-router-dom';\nimport './App.css';\n\nvar App =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(App, _Component);\n\n  function App(props) {\n    var _this;\n\n    _classCallCheck(this, App);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(App).call(this, props));\n\n    _this.actualizar = function (token, id, admin) {\n      localStorage.setItem('admin', 'true');\n\n      _this.setState({\n        token: token,\n        userid: id,\n        ADMIN: admin\n      });\n\n      if (admin) {\n        window.location = '/';\n      } else {\n        window.location = 'home';\n      }\n    };\n\n    _this.state = {\n      token: '',\n      userid: '',\n      ADMIN: false,\n      logged: false\n    };\n    _this.logout = _this.logout.bind(_assertThisInitialized(_assertThisInitialized(_this)));\n    return _this;\n  }\n\n  _createClass(App, [{\n    key: \"logout\",\n    value: function logout() {\n      localStorage.removeItem('token');\n      localStorage.setItem('admin', 'false');\n      localStorage.setItem('userid', '-1');\n      console.log('se borro el token');\n      alert('Se cerro sesión exitosamente');\n    }\n  }, {\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      try {\n        /*\r\n        let tok = localStorage.getItem('token', '');\r\n        let usu = localStorage.getItem('userid', '2');\r\n        if(tok && usu && userid==-1){\r\n        this.setState(\r\n        userid: usu;\r\n        )\r\n        }*/\n      } catch (e) {\n        console.log(e);\n      }\n    }\n  }, {\n    key: \"componentWillMount\",\n    value: function componentWillMount() {\n      var a = localStorage.getItem('token');\n\n      if (a !== null && a.length > 0) {\n        this.setState({\n          logged: true\n        });\n      } else {\n        this.setState({\n          logged: false\n        });\n      }\n\n      var b = localStorage.getItem('admin');\n\n      if (b === 'true') {\n        this.setState({\n          ADMIN: true\n        });\n      } else {\n        this.setState({\n          ADMIN: false\n        });\n      }\n\n      var c = localStorage.getItem('userid');\n\n      if (c !== 'admin') {\n        this.setState({\n          userid: parseInt(c)\n        });\n      } else {\n        this.setState({\n          userid: 0\n        });\n      }\n\n      var d = localStorage.getItem('token');\n\n      if (d) {\n        console.log(d.substr(1, d.length - 2));\n      }\n\n      if (d !== '' && d) {\n        this.setState({\n          token: d.substr(1, d.length - 2)\n        });\n      } else {\n        this.setState({\n          token: ''\n        });\n      }\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      //const language =\n      return React.createElement(\"div\", {\n        className: \"App\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 105\n        },\n        __self: this\n      }, React.createElement(BrowserRouter, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 106\n        },\n        __self: this\n      }, React.createElement(Vista, Object.assign({}, this.state, {\n        actualizar: this.actualizar,\n        logout: this.logout,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 107\n        },\n        __self: this\n      }))));\n    }\n  }]);\n\n  return App;\n}(Component);\n\nexport default App;","map":{"version":3,"sources":["/Users/danielbrawn/Desktop/FrontProvi/src/App.js"],"names":["React","Component","Vista","BrowserRouter","App","props","actualizar","token","id","admin","localStorage","setItem","setState","userid","ADMIN","window","location","state","logged","logout","bind","removeItem","console","log","alert","e","a","getItem","length","b","c","parseInt","d","substr"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\r\nimport Vista from './components/Structure.js';\r\nimport {BrowserRouter} from 'react-router-dom';\r\nimport './App.css';\r\n\r\nclass App extends Component {\r\n  constructor(props){\r\n    super(props);\r\n    this.state={\r\n      token:'',\r\n      userid:'',\r\n      ADMIN:false,\r\n      logged:false\r\n    }\r\n    this.logout = this.logout.bind(this)\r\n  }\r\n  logout(){\r\n    localStorage.removeItem('token');\r\n    localStorage.setItem('admin','false');\r\n    localStorage.setItem('userid','-1');\r\n    console.log('se borro el token');\r\n    alert('Se cerro sesión exitosamente');\r\n  }\r\n  componentDidMount(){\r\n    try{/*\r\n    let tok = localStorage.getItem('token', '');\r\n    let usu = localStorage.getItem('userid', '2');\r\n    if(tok && usu && userid==-1){\r\n      this.setState(\r\n        userid: usu;\r\n      )\r\n    }*/}\r\n    catch(e){\r\n      console.log(e);\r\n    }\r\n  }\r\n  actualizar=(token,id,admin)=>{\r\n    localStorage.setItem('admin','true');\r\n    this.setState({\r\n      token: token,\r\n      userid:id,\r\n      ADMIN:admin\r\n    });\r\n    if(admin){\r\n      window.location='/';\r\n    }\r\n    else{\r\n      window.location='home';\r\n    }\r\n  }\r\n  componentWillMount(){\r\n      let a=localStorage.getItem('token');\r\n      if(a!==null&&a.length>0){\r\n        this.setState({\r\n          logged:true\r\n        });\r\n      }\r\n      else{\r\n        this.setState({\r\n          logged:false\r\n        });\r\n      }\r\n      let b=localStorage.getItem('admin');\r\n      if(b==='true'){\r\n        this.setState({\r\n          ADMIN:true\r\n        });\r\n      }\r\n      else{\r\n        this.setState({\r\n          ADMIN:false\r\n        });\r\n      }\r\n      let c=localStorage.getItem('userid');\r\n      if(c!=='admin'){\r\n        this.setState({\r\n          userid:parseInt(c)\r\n        });\r\n      }\r\n      else{\r\n        this.setState({\r\n          userid:0\r\n        });\r\n      }\r\n      let d=localStorage.getItem('token');\r\n      if(d){\r\n      console.log(d.substr(1,d.length-2));}\r\n      if(d!==''&& d){\r\n        this.setState({\r\n          token:d.substr(1,d.length-2)\r\n        });\r\n      }\r\n      else{\r\n        this.setState({\r\n          token:''\r\n        });\r\n      }\r\n  }\r\n  render() {\r\n\r\n    //const language =\r\n\r\n\r\n    return (\r\n      <div className=\"App\">\r\n        <BrowserRouter>\r\n            <Vista {...this.state} actualizar={this.actualizar} logout={this.logout}/>\r\n        </BrowserRouter>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default App;\r\n"]},"metadata":{},"sourceType":"module"}
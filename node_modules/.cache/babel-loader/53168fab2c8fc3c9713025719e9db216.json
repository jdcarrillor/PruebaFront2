{"ast":null,"code":"import _classCallCheck from \"/Users/danielbrawn/Desktop/FrontProvi/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/Users/danielbrawn/Desktop/FrontProvi/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport auth0 from \"auth0-js\";\n\nvar Auth =\n/*#__PURE__*/\nfunction () {\n  _createClass(Auth, [{\n    key: \"handleAuthentication\",\n    value: function handleAuthentication() {\n      this.auth0.parseHash(function (err, authResults) {\n        if (authResults && authResults.accessToken && authResults.idToken) {\n          var expiresAt = JSON.stringify(authResults.expiresIn * 1000 + new Date().getTime());\n          localStorage.setItem(\"access_token\", authResults.accessToken);\n          localStorage.setItem(\"id_token\", authResults.idToken);\n          localStorage.setItem(\"expires_at\", expiresAt); //withRouter.history.push('/ProductoList');\n        }\n      });\n    }\n  }, {\n    key: \"isAuthenticated\",\n    value: function isAuthenticated() {\n      var expiresAt = JSON.parse(localStorage.getItem(\"expires_at\"));\n      return new Date().getTime() < expiresAt;\n    }\n  }]);\n\n  function Auth() {\n    _classCallCheck(this, Auth);\n\n    this.auth0 = new auth0.WebAuth({\n      domain: \"isis2503-jdcarrillor.auth0.com\",\n      clientID: \"8ywcQiN8stiYLzKAPUmGIblxj8YJzPYg\",\n      redirectUri: \"http://localhost:3000/\",\n      audience: \"https://isis2503-jdcarrillor.auth0.com/userinfo\",\n      responseType: \"token id_token\",\n      scope: \"openid\"\n    });\n    this.login = this.login.bind(this);\n  }\n\n  _createClass(Auth, [{\n    key: \"login\",\n    value: function login() {\n      this.auth0.authorize();\n    }\n  }]);\n\n  return Auth;\n}();\n\nexport { Auth as default };","map":{"version":3,"sources":["/Users/danielbrawn/Desktop/FrontProvi/src/components/Auth.js"],"names":["auth0","Auth","parseHash","err","authResults","accessToken","idToken","expiresAt","JSON","stringify","expiresIn","Date","getTime","localStorage","setItem","parse","getItem","WebAuth","domain","clientID","redirectUri","audience","responseType","scope","login","bind","authorize"],"mappings":";;AAAA,OAAOA,KAAP,MAAkB,UAAlB;;IAEqBC,I;;;;;2CAaK;AAClB,WAAKD,KAAL,CAAWE,SAAX,CAAqB,UAACC,GAAD,EAAMC,WAAN,EAAoB;AACrC,YAAIA,WAAW,IAAIA,WAAW,CAACC,WAA3B,IAA0CD,WAAW,CAACE,OAA1D,EAAkE;AAE9D,cAAIC,SAAS,GAAEC,IAAI,CAACC,SAAL,CAAgBL,WAAW,CAACM,SAAb,GAAyB,IAAzB,GAAgC,IAAIC,IAAJ,GAAWC,OAAX,EAA/C,CAAf;AACAC,UAAAA,YAAY,CAACC,OAAb,CAAqB,cAArB,EAAqCV,WAAW,CAACC,WAAjD;AACAQ,UAAAA,YAAY,CAACC,OAAb,CAAqB,UAArB,EAAiCV,WAAW,CAACE,OAA7C;AACAO,UAAAA,YAAY,CAACC,OAAb,CAAqB,YAArB,EAAmCP,SAAnC,EAL8D,CAOhE;AAED;AAEJ,OAZD;AAaH;;;sCAEgB;AAEZ,UAAIA,SAAS,GAAEC,IAAI,CAACO,KAAL,CAAWF,YAAY,CAACG,OAAb,CAAqB,YAArB,CAAX,CAAf;AACA,aAAO,IAAIL,IAAJ,GAAWC,OAAX,KAAuBL,SAA9B;AAEJ;;;AAGD,kBAAa;AAAA;;AAAA,SApCbP,KAoCa,GApCN,IAAIA,KAAK,CAACiB,OAAV,CAAkB;AAErBC,MAAAA,MAAM,EAAE,gCAFa;AAGrBC,MAAAA,QAAQ,EAAE,kCAHW;AAIrBC,MAAAA,WAAW,EAAE,wBAJQ;AAKrBC,MAAAA,QAAQ,EAAE,iDALW;AAMrBC,MAAAA,YAAY,EAAE,gBANO;AAOrBC,MAAAA,KAAK,EAAE;AAPc,KAAlB,CAoCM;AACT,SAAKC,KAAL,GAAW,KAAKA,KAAL,CAAWC,IAAX,CAAgB,IAAhB,CAAX;AAEH;;;;4BAGD;AACI,WAAKzB,KAAL,CAAW0B,SAAX;AACH;;;;;;SA7CgBzB,I","sourcesContent":["import auth0 from \"auth0-js\";\r\n\r\nexport default class Auth{\r\n    auth0= new auth0.WebAuth({\r\n\r\n        domain: \"isis2503-jdcarrillor.auth0.com\",\r\n        clientID: \"8ywcQiN8stiYLzKAPUmGIblxj8YJzPYg\",\r\n        redirectUri: \"http://localhost:3000/\",\r\n        audience: \"https://isis2503-jdcarrillor.auth0.com/userinfo\",\r\n        responseType: \"token id_token\",\r\n        scope: \"openid\"\r\n\r\n    })\r\n\r\n\r\n    handleAuthentication(){\r\n        this.auth0.parseHash((err, authResults)=>{\r\n            if (authResults && authResults.accessToken && authResults.idToken){\r\n\r\n                let expiresAt= JSON.stringify((authResults.expiresIn)* 1000 + new Date().getTime());\r\n                localStorage.setItem(\"access_token\", authResults.accessToken);\r\n                localStorage.setItem(\"id_token\", authResults.idToken);\r\n                localStorage.setItem(\"expires_at\", expiresAt);\r\n\r\n              //withRouter.history.push('/ProductoList');\r\n\r\n            }\r\n            \r\n        })\r\n    }\r\n\r\n    isAuthenticated(){\r\n\r\n         let expiresAt =JSON.parse(localStorage.getItem(\"expires_at\"));\r\n         return new Date().getTime() < expiresAt;\r\n\r\n    }\r\n\r\n\r\n    constructor(){\r\n        this.login=this.login.bind(this);\r\n\r\n    }\r\n\r\n    login()\r\n    {\r\n        this.auth0.authorize();\r\n    }\r\n}"]},"metadata":{},"sourceType":"module"}
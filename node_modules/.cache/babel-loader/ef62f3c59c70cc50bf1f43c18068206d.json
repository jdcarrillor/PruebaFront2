{"ast":null,"code":"import _classCallCheck from \"/Users/danielbrawn/Desktop/FrontProvi/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/Users/danielbrawn/Desktop/FrontProvi/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/Users/danielbrawn/Desktop/FrontProvi/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/Users/danielbrawn/Desktop/FrontProvi/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/Users/danielbrawn/Desktop/FrontProvi/node_modules/@babel/runtime/helpers/esm/inherits\";\nvar _jsxFileName = \"/Users/danielbrawn/Desktop/FrontProvi/src/components/Login.js\";\nimport React from 'react';\nimport axios from 'axios';\nimport { FormattedMessage } from 'react-intl';\n\nvar Login =\n/*#__PURE__*/\nfunction (_React$Component) {\n  _inherits(Login, _React$Component);\n\n  function Login(props) {\n    var _this;\n\n    _classCallCheck(this, Login);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(Login).call(this, props));\n\n    _this.login = function (event) {\n      event.preventDefault();\n      var username1 = document.getElementById('usernameInput').value;\n      var password1 = document.getElementById('passwordInput').value;\n      var dats = {\n        username: username1,\n        password: password1\n      };\n      console.log(\"Se envia request login\");\n      var actualizar = _this.props.actualizar;\n      axios.post('https://regalayapp1.herokuapp.com/login', dats).then(function (response) {\n        var bool = response.status === 200;\n\n        if (bool) {\n          localStorage.setItem('token', JSON.stringify(response.data.token));\n          localStorage.setItem('userid', JSON.stringify(response.data.userid));\n\n          if (response.data.userid === 'admin') {\n            actualizar(response.data.token, response.data.userid, true);\n          }\n\n          window.location.reload();\n        } else {\n          alert('Usuario o contraseña incorrecto');\n        }\n      }).catch(function (e) {\n        console.log(e);\n        console.log(dats);\n        alert(\"Usuario o contraseña incorrecto\");\n      });\n    };\n\n    _this.state = {\n      exito: false\n    };\n\n    if (_this.props.logged) {\n      if (_this.props.ADMIN) {\n        window.location = \"/\";\n      } else {\n        window.location = \"/\";\n      }\n    }\n\n    console.log('el token actual es:' + localStorage.getItem(\"token\"));\n    return _this;\n  }\n\n  _createClass(Login, [{\n    key: \"render\",\n    value: function render() {\n      return React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 53\n        },\n        __self: this\n      }, React.createElement(\"form\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 54\n        },\n        __self: this\n      }, React.createElement(\"input\", {\n        type: \"text\",\n        placeholder: \"Usuario\",\n        name: \"usuario\",\n        id: \"usernameInput\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 55\n        },\n        __self: this\n      }), React.createElement(\"input\", {\n        type: \"password\",\n        placeholder: \"Constrase\\xF1a\",\n        name: \"contrasena\",\n        id: \"passwordInput\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 56\n        },\n        __self: this\n      }), React.createElement(\"button\", {\n        className: \"btn btn-info\",\n        onClick: this.login,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 57\n        },\n        __self: this\n      }, React.createElement(FormattedMessage, {\n        id: \"Login\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 57\n        },\n        __self: this\n      }))));\n    }\n  }]);\n\n  return Login;\n}(React.Component);\n\nexport { Login as default };","map":{"version":3,"sources":["/Users/danielbrawn/Desktop/FrontProvi/src/components/Login.js"],"names":["React","axios","FormattedMessage","Login","props","login","event","preventDefault","username1","document","getElementById","value","password1","dats","username","password","console","log","actualizar","post","then","response","bool","status","localStorage","setItem","JSON","stringify","data","token","userid","window","location","reload","alert","catch","e","state","exito","logged","ADMIN","getItem","Component"],"mappings":"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","sourcesContent":["import React from 'react';\r\nimport axios from 'axios'\r\nimport {FormattedMessage} from 'react-intl';\r\n\r\nexport default class Login extends React.Component {\r\n    constructor(props) {\r\n        super(props);\r\n        this.state={\r\n            exito:false\r\n        }\r\n        if(this.props.logged){\r\n            if(this.props.ADMIN){\r\n                window.location=\"/\";\r\n            }\r\n            else{\r\n                window.location=\"/\";\r\n            }\r\n        }\r\n        console.log('el token actual es:'+ localStorage.getItem(\"token\"));\r\n    }\r\n\r\n    login=(event)=>{\r\n        event.preventDefault();\r\n        let username1=document.getElementById('usernameInput').value;\r\n        let password1=document.getElementById('passwordInput').value;\r\n        let dats={\r\n            username:username1,\r\n            password:password1\r\n        }\r\n        console.log(\"Se envia request login\");\r\n        let actualizar=this.props.actualizar;\r\n        axios.post('https://regalayapp1.herokuapp.com/login',dats).then((response)=>{\r\n            let bool=(response.status===200);\r\n            if(bool){\r\n                localStorage.setItem('token',JSON.stringify(response.data.token));\r\n                localStorage.setItem('userid',JSON.stringify(response.data.userid));\r\n                if(response.data.userid==='admin'){\r\n                    actualizar(response.data.token,response.data.userid,true);\r\n                }\r\n                window.location.reload();\r\n            }\r\n            else{\r\n                alert('Usuario o contraseña incorrecto');\r\n            }\r\n        }).catch((e)=>{\r\n            console.log(e);\r\n            console.log(dats);\r\n            alert(\"Usuario o contraseña incorrecto\");\r\n        });\r\n    }\r\n    render() {\r\n        return (\r\n            <div>\r\n                <form>\r\n                    <input type=\"text\" placeholder=\"Usuario\" name=\"usuario\" id='usernameInput'></input>\r\n                    <input type=\"password\" placeholder=\"Constraseña\" name=\"contrasena\" id='passwordInput'></input>\r\n                    <button className='btn btn-info' onClick={this.login}><FormattedMessage id=\"Login\"/></button>\r\n                </form>\r\n            </div>\r\n        )\r\n    }\r\n}\r\n"]},"metadata":{},"sourceType":"module"}
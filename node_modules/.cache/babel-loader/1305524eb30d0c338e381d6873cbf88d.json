{"ast":null,"code":"import _classCallCheck from \"/Users/danielbrawn/Desktop/FrontProvi/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/Users/danielbrawn/Desktop/FrontProvi/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/Users/danielbrawn/Desktop/FrontProvi/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/Users/danielbrawn/Desktop/FrontProvi/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/Users/danielbrawn/Desktop/FrontProvi/node_modules/@babel/runtime/helpers/esm/inherits\";\nvar _jsxFileName = \"/Users/danielbrawn/Desktop/FrontProvi/src/components/PromocionDetail.js\";\nimport React, { Component } from 'react';\nimport '../css/producto-styleMs.css';\nimport { Link } from 'react-router-dom';\nimport { FormattedMessage } from \"react-intl\";\nimport axios from 'axios';\n\nvar PromocionDetail =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(PromocionDetail, _Component);\n\n  function PromocionDetail(props) {\n    var _this;\n\n    _classCallCheck(this, PromocionDetail);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(PromocionDetail).call(this, props));\n\n    _this.postPromocion = function () {\n      var nombre = document.getElementById('tituloPost').value;\n      var img = [];\n      var url1 = document.getElementById('url1Post').value;\n      var url1json = {\n        url: url1\n      };\n      img.push(url1json);\n      var url2 = document.getElementById('url2Post').value;\n      var url2json = {\n        url: url2\n      };\n      img.push(url2json);\n      var men = document.getElementById('mensajePost').value;\n      var plan = document.getElementById('plantillaPost').value;\n      var tarjetaRegalo = {\n        nombre: nombre,\n        mensaje: men,\n        imagenes: img,\n        plantilla: plan,\n        cupones: [],\n        productos: []\n      };\n      var tok = localStorage.getItem('token');\n\n      if (tok) {\n        var token = localStorage.getItem('token').substring(1, localStorage.getItem('token').length - 1);\n        axios.defaults.headers.common['Authorization'] = 'Bearer ' + token;\n      }\n\n      axios.post('https://regalayapp1.herokuapp.com/promocion', tarjetaRegalo);\n      return false;\n    };\n\n    _this.putTarjetaRegalo = function () {\n      var nombre = document.getElementById('tituloPut').value;\n      var img = [];\n\n      if (nombre === \"\") {\n        nombre = _this.state.nombre;\n      }\n\n      var url1 = document.getElementById('url1Put').value;\n\n      if (url1 === \"\") {\n        url1 = _this.state.imagenes[0];\n      }\n\n      var url1json = {\n        url: url1\n      };\n      img.push(url1json);\n      var url2 = document.getElementById('url2Put').value;\n\n      if (url2 === \"\") {\n        url2 = _this.state.imagenes[1];\n      }\n\n      var url2json = {\n        url: url2\n      };\n      img.push(url2json);\n      var men = document.getElementById('mensajePut').value;\n\n      if (men === \"\") {\n        men = _this.state.mensaje;\n      }\n\n      var plan = document.getElementById('plantillaPut').value;\n\n      if (plan === \"\") {\n        plan = _this.state.plantilla;\n      }\n\n      var tarjetaRegalo = {\n        nombre: nombre,\n        mensaje: men,\n        imagenes: img,\n        plantilla: plan,\n        cupones: [],\n        productos: []\n      };\n      var tok = localStorage.getItem('token');\n\n      if (tok) {\n        var token = localStorage.getItem('token').substring(1, localStorage.getItem('token').length - 1);\n        axios.defaults.headers.common['Authorization'] = 'Bearer ' + token;\n      }\n\n      axios.put('https://regalayapp1.herokuapp.com/tarjetaRegalo/' + _this.state.id, tarjetaRegalo);\n      console.log(_this.state.id);\n    };\n\n    _this.deletePromocion = function () {\n      var tok = localStorage.getItem('token');\n\n      if (tok) {\n        var token = localStorage.getItem('token').substring(1, localStorage.getItem('token').length - 1);\n        axios.defaults.headers.common['Authorization'] = 'Bearer ' + token;\n      }\n\n      axios.delete('https://regalayapp1.herokuapp.com/promocion/' + _this.state.id);\n      window.location.href = 'https://regalayapp1.herokuapp.com/Promociones';\n    };\n\n    _this.state = {\n      nombre: \"\",\n      fechaInicio: \"\",\n      fechaFin: \"\",\n      pagina: 0,\n      IDmarcas: [],\n      IDtiendas: [],\n      tienda: \"\",\n      marcas: []\n    };\n    return _this;\n  }\n\n  _createClass(PromocionDetail, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      var _this2 = this;\n\n      var id = this.props.match.params.idPromocion;\n      axios.get('https://regalayapp1.herokuapp.com/promocion/' + id).then(function (response) {\n        var a = [];\n        var idTienda = 0;\n        var state = _this2.state;\n        var tarjetaRegalo = response.data;\n        state.id = id;\n        state.nombre = tarjetaRegalo.nombre;\n        state.fechaInicio = tarjetaRegalo.fechaDeInicio;\n        state.fechaFin = tarjetaRegalo.fechaDeFin;\n        state.pagina = 0;\n        a = tarjetaRegalo.marcas;\n        console.log(a.length);\n        idTienda = tarjetaRegalo.idTienda; // pueden cambiar el tamaño de partion aca\n\n        _this2.setState(state);\n\n        var i;\n\n        for (i = 0; i < a.length; i++) {\n          axios.get('https://regalayapp1.herokuapp.com/marcas/' + a[i].idMarca).then(function (response) {\n            var state = _this2.state;\n            var marca = response.data;\n            state.marcas.push(marca.imagen);\n            console.log(state.marcas[1]);\n            state.pagina = 0; // pueden cambiar el tamaño de partion aca\n\n            _this2.setState(state);\n          });\n        }\n\n        axios.get('https://regalayapp1.herokuapp.com/tiendas/' + idTienda).then(function (response) {\n          var state = _this2.state;\n          var tienda = response.data;\n          console.log(tienda);\n          state.tienda = tienda.imagen;\n          state.pagina = 0; // pueden cambiar el tamaño de partion aca\n\n          _this2.setState(state);\n        });\n      });\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      return React.createElement(\"div\", {\n        className: \"container\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 157\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"float-left\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 158\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"card text-center\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 159\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"overflow\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 160\n        },\n        __self: this\n      }, React.createElement(\"img\", {\n        className: \"card-img-top\",\n        src: this.state.tienda,\n        alt: \"Image1\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 161\n        },\n        __self: this\n      })), React.createElement(\"div\", {\n        className: \"card-body text-dark\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 163\n        },\n        __self: this\n      }, React.createElement(\"h1\", {\n        className: \"card-title\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 164\n        },\n        __self: this\n      }, this.state.nombre)), React.createElement(\"div\", {\n        className: \"row\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 166\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"overflow\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 167\n        },\n        __self: this\n      }, React.createElement(\"img\", {\n        className: \"card-img-top down\",\n        src: this.state.marcas[0],\n        alt: \"Image1\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 168\n        },\n        __self: this\n      })), React.createElement(\"div\", {\n        className: \"overflow\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 170\n        },\n        __self: this\n      }, React.createElement(\"img\", {\n        className: \"card-img-top down\",\n        src: this.state.marcas[1],\n        alt: \"Image1\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 171\n        },\n        __self: this\n      }))), React.createElement(\"div\", {\n        className: \"og\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 175\n        },\n        __self: this\n      }, React.createElement(Link, {\n        to: {\n          pathname: \"/Promociones/\"\n        },\n        className: \"back \",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 176\n        },\n        __self: this\n      }, React.createElement(FormattedMessage, {\n        id: \"Back\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 178\n        },\n        __self: this\n      })), \"\\xA0\", React.createElement(Link, {\n        to: {\n          pathname: \"/ProductoList/\"\n        },\n        className: \"back \",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 181\n        },\n        __self: this\n      }, React.createElement(FormattedMessage, {\n        id: \"Back\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 183\n        },\n        __self: this\n      }))))));\n    }\n  }]);\n\n  return PromocionDetail;\n}(Component);\n\nexport default PromocionDetail;","map":{"version":3,"sources":["/Users/danielbrawn/Desktop/FrontProvi/src/components/PromocionDetail.js"],"names":["React","Component","Link","FormattedMessage","axios","PromocionDetail","props","postPromocion","nombre","document","getElementById","value","img","url1","url1json","url","push","url2","url2json","men","plan","tarjetaRegalo","mensaje","imagenes","plantilla","cupones","productos","tok","localStorage","getItem","token","substring","length","defaults","headers","common","post","putTarjetaRegalo","state","put","id","console","log","deletePromocion","delete","window","location","href","fechaInicio","fechaFin","pagina","IDmarcas","IDtiendas","tienda","marcas","match","params","idPromocion","get","then","response","a","idTienda","data","fechaDeInicio","fechaDeFin","setState","i","idMarca","marca","imagen","pathname"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\r\n\r\nimport '../css/producto-styleMs.css';\r\nimport {Link} from 'react-router-dom';\r\nimport {FormattedMessage} from \"react-intl\";\r\nimport axios from 'axios'\r\nclass PromocionDetail extends Component{\r\n  constructor(props){\r\n    super(props);\r\n    this.state={\r\n      nombre:\"\",\r\n      fechaInicio:\"\",\r\n      fechaFin:\"\",\r\n      pagina: 0,\r\n      IDmarcas:[],\r\n      IDtiendas:[],\r\n      tienda:\"\",\r\n      marcas:[]\r\n    };\r\n  }\r\n\r\n  componentDidMount() {\r\n    var id=this.props.match.params.idPromocion;\r\n\r\n        axios.get('https://regalayapp1.herokuapp.com/promocion/'+id)\r\n            .then((response) => {\r\n                var a=[];\r\n                var idTienda=0\r\n                var state = this.state;\r\n                var tarjetaRegalo = response.data;\r\n                state.id = id;\r\n                state.nombre = tarjetaRegalo.nombre;\r\n                state.fechaInicio = tarjetaRegalo.fechaDeInicio;\r\n                state.fechaFin=tarjetaRegalo.fechaDeFin;\r\n                state.pagina = 0;\r\n                a=tarjetaRegalo.marcas;\r\n                console.log(a.length);\r\n                idTienda=tarjetaRegalo.idTienda;\r\n                // pueden cambiar el tamaño de partion aca\r\n                this.setState(state);\r\n                var i;\r\n                for (i = 0; i < a.length; i++){\r\n                    axios.get('https://regalayapp1.herokuapp.com/marcas/'+a[i].idMarca)\r\n                        .then((response) => {\r\n                            var state = this.state;\r\n                            var marca = response.data;\r\n                            state.marcas.push(marca.imagen);\r\n                            console.log(state.marcas[1]);\r\n                            state.pagina = 0;\r\n                            // pueden cambiar el tamaño de partion aca\r\n                            this.setState(state);\r\n                        });\r\n                      }\r\n                      axios.get('https://regalayapp1.herokuapp.com/tiendas/'+idTienda)\r\n                          .then((response) => {\r\n                              var state = this.state;\r\n                              var tienda = response.data;\r\n                              console.log(tienda);\r\n                              state.tienda =tienda.imagen;\r\n                              state.pagina = 0;\r\n                              // pueden cambiar el tamaño de partion aca\r\n                              this.setState(state);\r\n                          });\r\n            });\r\n    }\r\n    postPromocion=()=>{\r\n      let nombre=document.getElementById('tituloPost').value;\r\n      let img=[];\r\n      let url1=document.getElementById('url1Post').value;\r\n      let url1json={\r\n        url:url1\r\n      }\r\n      img.push(url1json);\r\n      let url2=document.getElementById('url2Post').value;\r\n      let url2json={\r\n        url:url2\r\n      }\r\n      img.push(url2json);\r\n      let men=document.getElementById('mensajePost').value;\r\n      let plan=document.getElementById('plantillaPost').value;\r\n      let tarjetaRegalo={\r\n        nombre:nombre,\r\n        mensaje:men,\r\n        imagenes:img,\r\n        plantilla:plan,\r\n        cupones:[],\r\n        productos:[]\r\n      }\r\n      var tok=localStorage.getItem('token');\r\n      if (tok) {\r\n        var token = localStorage.getItem('token').substring(1, localStorage.getItem('token').length - 1);\r\n        axios.defaults.headers.common['Authorization'] =\r\n            'Bearer ' + token;\r\n      }\r\n      axios.post('https://regalayapp1.herokuapp.com/promocion', tarjetaRegalo);\r\n      return false;\r\n    }\r\n    putTarjetaRegalo=()=>{\r\n      let nombre=document.getElementById('tituloPut').value;\r\n      let img=[];\r\n      if(nombre===\"\"){\r\n        nombre=this.state.nombre;\r\n      }\r\n      let url1=document.getElementById('url1Put').value;\r\n      if(url1===\"\"){\r\n        url1=this.state.imagenes[0];\r\n      }\r\n      let url1json={\r\n        url:url1\r\n      }\r\n      img.push(url1json);\r\n      let url2=document.getElementById('url2Put').value;\r\n      if(url2===\"\"){\r\n        url2=this.state.imagenes[1];\r\n      }\r\n      let url2json={\r\n        url:url2\r\n      }\r\n      img.push(url2json);\r\n      let men=document.getElementById('mensajePut').value;\r\n      if(men===\"\"){\r\n        men=this.state.mensaje;\r\n      }\r\n      let plan=document.getElementById('plantillaPut').value;\r\n      if(plan===\"\"){\r\n        plan=this.state.plantilla;\r\n      }\r\n      let tarjetaRegalo={\r\n        nombre:nombre,\r\n        mensaje:men,\r\n        imagenes:img,\r\n        plantilla:plan,\r\n        cupones:[],\r\n        productos:[]\r\n      }\r\n      var tok=localStorage.getItem('token');\r\n      if (tok) {\r\n        var token = localStorage.getItem('token').substring(1, localStorage.getItem('token').length - 1);\r\n        axios.defaults.headers.common['Authorization'] =\r\n            'Bearer ' + token;\r\n      }\r\n      axios.put('https://regalayapp1.herokuapp.com/tarjetaRegalo/'+this.state.id, tarjetaRegalo);\r\n      console.log(this.state.id);\r\n    }\r\n    deletePromocion=()=>{\r\n      var tok=localStorage.getItem('token');\r\n      if (tok) {\r\n        var token = localStorage.getItem('token').substring(1, localStorage.getItem('token').length - 1);\r\n        axios.defaults.headers.common['Authorization'] =\r\n            'Bearer ' + token;\r\n      }\r\n      axios.delete('https://regalayapp1.herokuapp.com/promocion/'+this.state.id);\r\n      window.location.href = 'https://regalayapp1.herokuapp.com/Promociones';\r\n    }\r\n  render(){\r\n    return(\r\n      <div className=\"container\">\r\n      <div className=\"float-left\">\r\n      <div className=\"card text-center\">\r\n        <div className=\"overflow\">\r\n          <img className='card-img-top' src={this.state.tienda} alt='Image1'/>\r\n        </div>\r\n        <div className=\"card-body text-dark\">\r\n        <h1 className=\"card-title\">{this.state.nombre}</h1>\r\n        </div>\r\n        <div className=\"row\">\r\n        <div className=\"overflow\">\r\n          <img className='card-img-top down' src={this.state.marcas[0]} alt='Image1'/>\r\n        </div>\r\n        <div className=\"overflow\">\r\n          <img className='card-img-top down' src={this.state.marcas[1]} alt='Image1'/>\r\n        </div>\r\n        </div>\r\n\r\n        <div className=\"og\">\r\n        <Link to={{\r\n          pathname:\"/Promociones/\",\r\n        }}  className=\"back \"><FormattedMessage id=\"Back\"/></Link>\r\n\r\n          &nbsp;\r\n          <Link to={{\r\n            pathname:\"/ProductoList/\",\r\n          }}  className=\"back \"><FormattedMessage id=\"Back\"/></Link>\r\n\r\n        </div>\r\n      </div>\r\n      </div>\r\n      </div>\r\n    );\r\n  }\r\n}\r\nexport default PromocionDetail;\r\n"]},"metadata":{},"sourceType":"module"}